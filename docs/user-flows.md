# CupNote 사용자 플로우 및 인터랙션 가이드

## 🎯 사용자 여정 맵

### **주요 사용자 시나리오**

#### **Scenario 1: 커피 초보자 (Cafe Mode)**
**상황**: 카페에서 처음 마셔보는 커피를 간단히 기록하고 싶음
**목표**: 빠르고 쉽게 커피 경험을 기록
**소요시간**: 3-5분

#### **Scenario 2: 홈 브루어 (Brew Mode)**
**상황**: 집에서 핸드드립으로 내린 커피를 상세히 기록
**목표**: 추출 레시피와 맛 평가를 함께 기록
**소요시간**: 5-8분

#### **Scenario 3: 커피 전문가 (Lab Mode)**
**상황**: 커피 품질을 전문적으로 평가하고 데이터화
**목표**: 실험 데이터와 정량적 평가까지 완전한 기록
**소요시간**: 8-12분

## 📱 상세 사용자 플로우

### **1. 앱 진입 → 모드 선택**

```
사용자 앱 실행
    ↓
🏠 Mode Selection 화면 로드
    ↓
사용자가 의도/상황에 맞는 모드 선택
    ├─ ☕ Cafe Mode (간편함 우선)
    ├─ 🏠 Brew Mode (홈브루 기록)
    └─ 🔬 Lab Mode (전문 평가)
```

**인터랙션 세부사항**:
- 각 모드 카드 터치 시 선택 피드백
- 소요시간 정보로 사용자 기대치 설정
- `selectMode(type)` 함수로 모드별 플로우 시작

### **2. 커피 기본 정보 입력**

```
☕ Coffee Info 화면 진입
    ↓
필수 정보 입력 (카페명, 커피명, 온도)
    ↓
선택사항: "추가 정보" 토글 열기
    ├─ 원산지, 품종 입력
    ├─ 가공방식 선택 (드롭다운)
    └─ 로스팅 레벨 선택 (드롭다운)
    ↓
"다음" 버튼 활성화 → 터치
```

**인터랙션 세부사항**:
- 실시간 입력 검증 (빈 필드 체크)
- HOT/ICED 토글 버튼 상태 관리
- `<details>` 태그로 추가 정보 접기/펼치기
- 진행률 바 29% 표시

### **3A. Cafe Mode 플로우 (간편)**

```
Coffee Info → Flavor Selection → Sensory Expression → Personal Notes → Roaster Notes → Result
```

**특징**:
- 추출 관련 화면 모두 건너뛰기
- 향미 선택부터 바로 시작
- 감각 평가는 한국어 표현만 사용

### **3B. Brew Mode 플로우 (홈브루)**

```
Coffee Info → Brew Settings → Flavor Selection → Sensory Expression → Personal Notes → Roaster Notes → Result
```

#### **Brew Settings 상세 플로우**:
```
드리퍼 선택 (6개 옵션)
    ↓
원두량 조절 (다이얼 방식)
    ├─ - 버튼으로 1g씩 감소
    └─ + 버튼으로 1g씩 증가
    ↓
비율 프리셋 선택 (1:15 ~ 1:18)
    ↓ (자동 계산)
물량 실시간 표시 업데이트
    ↓
[선택사항] 추출 타이머 사용
    ├─ 시작 → 랩 기록 → 완료
    └─ 단계별 시간 기록
    ↓
[선택사항] 개인 레시피 저장/불러오기
```

**인터랙션 세부사항**:
- 드리퍼 선택 시 시각적 선택 상태 표시
- 원두량/비율 변경 시 물량 실시간 계산
- 타이머: `setInterval`로 실시간 업데이트
- 랩 기능: 단계별 시간 누적 기록

### **3C. Lab Mode 플로우 (전문가)**

```
Coffee Info → Brew Settings → Experimental Data → Flavor Selection → Sensory Mouthfeel → Sensory Expression → Personal Notes → Roaster Notes → Result
```

#### **Experimental Data 상세 플로우**:
```
추출 방법 선택 (V60/Chemex/Aeropress/Espresso)
    ↓
분쇄도 선택 (Coarse/Medium/Fine/Extra Fine)
    ↓
실험 변수 조절 (±1 단위)
    ├─ 물 온도 (°C)
    ├─ 총 추출 시간 (초)
    ├─ TDS (%)
    └─ 추출 수율 (%)
```

#### **Sensory Mouthfeel 상세 플로우**:
```
6개 파라미터를 0-100 슬라이더로 평가
    ├─ Body (바디감): 가벼움 ↔ 묵직함
    ├─ Acidity (산미): 낮음 ↔ 높음
    ├─ Sweetness (단맛): 없음 ↔ 강함
    ├─ Finish (피니시): 짧음 ↔ 길음
    ├─ Bitterness (쓴맛): 없음 ↔ 강함
    └─ Balance (균형감): 불균형 ↔ 완벽한 균형
```

**인터랙션 세부사항**:
- 슬라이더 실시간 값 표시
- 각 파라미터별 한국어 설명 제공
- 터치 드래그로 직관적 조절

### **4. 공통 플로우: 감각 평가**

#### **Flavor Selection**:
```
카테고리별 향미 선택 (최대 5개)
    ├─ 🍓 Fruity: 딸기, 블루베리, 레몬, 오렌지, 사과
    ├─ 🥜 Nutty: 아몬드, 헤이즐넛, 땅콩, 호두
    ├─ 🍫 Chocolate: 다크초콜릿, 밀크초콜릿, 카카오, 캐러멜
    └─ 🌺 Floral: 재스민, 장미, 라벤더, 허브
    ↓
선택 카운터 실시간 업데이트 (0/5)
5개 초과 시 가장 오래된 선택 자동 해제
```

#### **Sensory Expression (한국어 표현)**:
```
6개 탭 중 하나 선택
    ├─ 산미: 상큼한, 밝은, 과일향의...
    ├─ 단맛: 달콤한, 부드러운, 캐러멜향의...
    ├─ 쓴맛: 진한, 강한, 로스팅향의...
    ├─ 바디: 묵직한, 가벼운, 부드러운...
    ├─ 애프터: 깔끔한, 여운이 긴, 개운한...
    └─ 밸런스: 조화로운, 균형잡힌, 완성도 높은...
    ↓
각 카테고리에서 다중 선택 가능
탭 전환으로 다른 카테고리 이동
```

### **5. 개인 기록 단계**

#### **Personal Notes**:
```
퀵 태그 선택 (감정/경험 기반)
    ├─ ☀️ 아침에 마시기 좋아요
    ├─ 🍯 달달해서 좋아요
    ├─ ✨ 산미가 매력적이에요
    ├─ 💪 진하고 묵직해요
    ├─ 😌 부드럽고 편안해요
    ├─ 💕 또 마시고 싶어요
    ├─ ⏱️ 추출이 잘 되었어요
    └─ 👍 레시피가 완벽해요
    ↓
자유 텍스트 입력 (200자 제한)
    ├─ 실시간 글자 수 카운팅
    └─ 200자 초과 시 입력 제한
    ↓
"다음" 또는 "건너뛰기" 선택
```

#### **Roaster Notes**:
```
카페/로스터 공식 테이스팅 노트 입력
    ↓
Match Score 계산을 위한 참조 데이터
    ↓
"완료" 또는 "건너뛰기" 선택
```

### **6. 결과 표시 및 완료**

```
🎉 Result 화면 진입
    ↓
테이스팅 결과 카드 표시
    ├─ 커피명, 카페명
    ├─ 선택된 표현들 태그로 표시
    └─ Match Score 원형 차트
    ↓
성취 시스템 체크
    ├─ 첫 기록 → 성취 팝업
    ├─ 연속 기록 → 연속 기록 뱃지
    └─ 특별 이벤트 → 특별 뱃지
    ↓
사용자 액션 선택
    ├─ "새로운 커피 기록하기" → 앱 리셋
    └─ "공유하기" → 네이티브 공유 API
```

## 🔄 상호작용 패턴

### **네비게이션 패턴**
- **선형 진행**: 이전/다음 버튼으로 단계별 진행
- **조건부 분기**: 모드에 따라 다른 화면 시퀀스
- **뒤로가기**: 브라우저 히스토리 관리
- **건너뛰기**: 선택적 단계 스키핑

### **입력 패턴**
- **점진적 공개**: 기본 → 상세 정보 순차 입력
- **실시간 피드백**: 입력 즉시 검증 및 계산
- **다중 선택**: 태그/옵션 복수 선택
- **범위 조절**: 슬라이더/다이얼 방식

### **피드백 패턴**
- **시각적 상태**: 선택/활성 상태 명확 표시
- **진행률 표시**: 전체 과정 대비 현재 위치
- **성취 피드백**: 완료 시 성취감 제공
- **오류 방지**: 잘못된 입력 사전 차단

### **데이터 흐름**
```
사용자 입력 → JavaScript 객체 저장 → 다음 화면으로 전달 → 최종 결과 생성
```

### **오프라인 지원**
- Service Worker로 오프라인 기록 가능
- 네트워크 복구 시 자동 동기화
- 로컬 스토리지 활용

## 🎨 UX 설계 원칙

### **인지 부담 최소화**
- 한 화면에 하나의 주요 작업만
- 선택지 개수 제한 (7±2 법칙)
- 직관적 아이콘과 색상 사용

### **개인화**
- 사용자 레벨별 모드 선택
- 개인 레시피 저장 기능
- 한국어 감각 표현 특화

### **접근성**
- 터치 타겟 44px 이상 크기
- 명확한 색상 대비
- 스크린 리더 지원 (향후)

### **성능**
- 즉시 로딩 (PWA)
- 부드러운 애니메이션
- 배터리 효율적 설계