# 📚 기록 리스트 화면 설계

## 📱 화면 개요

**기록 리스트 화면**은 사용자의 모든 커피 테이스팅 기록을 체계적으로 보여주고, 검색/필터링을 통해 원하는 기록을 쉽게 찾을 수 있게 합니다.

## 🎯 핵심 목적

- **전체 기록 조회**: 시간 순으로 정렬된 모든 테이스팅 기록
- **효율적인 검색**: 키워드, 날짜, 카페별 검색 기능
- **스마트 필터링**: 점수, 모드, 향미별 필터
- **빠른 재방문**: 즐겨찾기와 최근 기록 우선 표시

## 📋 화면 구성 요소

### 1. **헤더 섹션**

```
📚 나의 커피 기록 (총 47개)
[🔍] [📊] [⚙️]
```

- 총 기록 수 표시
- 검색 아이콘
- 통계 바로가기
- 설정 메뉴

### 2. **검색 및 필터 바**

```
┌─────────────────────────────┐
│ 🔍 커피명, 카페명으로 검색...   │
└─────────────────────────────┘
[전체] [이번주] [이번달] [필터▼]
```

- 검색 입력창 (실시간 검색)
- 빠른 기간 필터 (전체/이번주/이번달)
- 고급 필터 드롭다운

### 3. **정렬 옵션**

```
📅 최신순 ▼    📊 47개 기록
```

- 정렬 기준 선택 (최신순/점수순/이름순)
- 필터 적용된 결과 수 표시

### 4. **기록 카드 리스트**

```
┌─────────────────────────────┐
│ ☕ 콜롬비아 수프리모          │
│ 📍 블루보틀 성수점           │
│ ⭐ 4.5/5 | 🕐 2시간 전      │
│ 🏷️ 상큼한 달콤한 균형잡힌    │
│ 📝 "아침에 마시기 좋은 커피"  │
└─────────────────────────────┘
```

- 커피명 (굵게)
- 카페명과 위치
- 평점과 기록 시간
- 선택한 향미 태그 (최대 3개)
- 개인 메모 미리보기 (한 줄)

### 5. **무한 스크롤 로딩**

```
    ... 더 불러오는 중 ...
    ┌───┐ ┌───┐ ┌───┐
    │   │ │   │ │   │ (스켈레톤)
    └───┘ └───┘ └───┘
```

- 20개씩 페이지네이션
- 스켈레톤 로딩 UI
- 맨 아래 도달 시 자동 로딩

### 6. **빈 상태 화면**

```
        ☕
    아직 기록이 없어요
   첫 번째 커피를 기록해보세요!
   [  테이스팅 시작하기  ]
```

- 기록이 없을 때 표시
- 긍정적인 메시지
- 즉시 액션 유도

### 7. **플로팅 액션 버튼**

```
        [+] ← 우하단 고정
```

- 새 기록 추가 버튼
- 항상 접근 가능한 위치
- 모드 선택으로 바로 이동

## 🔍 검색 및 필터 기능

### **실시간 검색**

- **대상**: 커피명, 카페명, 개인 메모
- **방식**: 입력 중 즉시 필터링 (300ms 디바운스)
- **하이라이트**: 검색어 강조 표시

### **고급 필터 옵션**

```
┌─ 필터 설정 ─────────────┐
│ 📅 기간 설정             │
│ [2025.01.01] ~ [오늘]   │
│                        │
│ ⭐ 평점 범위             │
│ [3.0] ━━●━━ [5.0]      │
│                        │
│ ☕ 모드 선택             │
│ □ Cafe □ HomeCafe □ Lab │
│                        │
│ 🏷️ 향미 카테고리         │
│ □ Fruity □ Nutty        │
│ □ Chocolate □ Floral    │
│                        │
│ [  초기화  ] [  적용  ]  │
└────────────────────────┘
```

### **빠른 필터 태그**

```
[전체] [⭐5점] [이번주] [카페모드] [홈카페] [실험실]
```

- 자주 사용하는 필터를 태그로 제공
- 터치로 즉시 적용/해제
- 조합 가능 (AND 조건)

## 🎨 UI/UX 설계

### **카드 디자인**

- **라운드 코너**: 16px 둥근 모서리
- **그림자**: 부드러운 드롭섀도우
- **터치 피드백**: 눌렀을 때 살짝 확대/어두워짐
- **스와이프 액션**: 좌/우 스와이프로 삭제/편집

### **상태별 색상**

- **최고 점수 (5점)**: 골드 테두리
- **높은 점수 (4-4.9)**: 그린 accent
- **보통 점수 (3-3.9)**: 기본 스타일
- **낮은 점수 (1-2.9)**: 회색 톤

### **로딩 및 에러 상태**

- **스켈레톤 로딩**: 실제 카드와 유사한 형태
- **에러 상태**: 재시도 버튼과 안내 메시지
- **오프라인**: 캐시된 데이터 표시 + 오프라인 표시

## 📊 데이터 요구사항

### **기본 데이터 구조**

```typescript
interface CoffeeRecordSummary {
  id: string
  coffee_name: string
  cafe_name: string
  location: string
  total_match_score: number
  selected_flavors: FlavorTag[]
  personal_notes: string
  mode: 'cafe' | 'homecafe' | 'lab'
  created_at: string
  updated_at: string
  // 추가 표시용 필드
  time_ago: string // "2시간 전"
  preview_flavors: FlavorTag[] // 최대 3개
  preview_notes: string // 50자 제한
}
```

### **검색/필터 파라미터**

```typescript
interface SearchFilters {
  query?: string // 검색어
  date_from?: string
  date_to?: string
  score_min?: number
  score_max?: number
  modes?: string[] // ['cafe', 'homecafe', 'lab']
  flavor_categories?: string[] // ['fruity', 'nutty', ...]
  sort_by: 'created_at' | 'score' | 'coffee_name'
  sort_order: 'desc' | 'asc'
  page: number
  limit: number
}
```

### **API 엔드포인트**

- `GET /api/records` - 기록 리스트 조회
- `GET /api/records/search` - 검색/필터링
- `DELETE /api/records/:id` - 기록 삭제
- `GET /api/records/stats` - 통계 요약

## 🔄 상태 관리

### **Pinia Store 구조**

```typescript
interface RecordsListState {
  records: CoffeeRecordSummary[]
  filteredRecords: CoffeeRecordSummary[]
  searchQuery: string
  filters: SearchFilters
  isLoading: boolean
  isLoadingMore: boolean
  hasNextPage: boolean
  totalCount: number
  error: string | null
}
```

### **주요 액션**

- `fetchRecords()` - 초기 로딩
- `searchRecords(query)` - 검색 실행
- `applyFilters(filters)` - 필터 적용
- `loadMoreRecords()` - 무한 스크롤
- `deleteRecord(id)` - 기록 삭제
- `clearFilters()` - 필터 초기화

## 📱 반응형 설계

### **모바일 (< 768px)**

- 단일 컬럼 카드 리스트
- 스와이프 네비게이션
- 바텀시트 필터

### **태블릿 (>= 768px)**

- 2컬럼 그리드 레이아웃
- 사이드바 필터 패널
- 더 넓은 카드 크기

## 🚀 성능 최적화

### **가상 스크롤링**

- 대량 데이터 처리용
- DOM 노드 수 제한
- 부드러운 스크롤 경험

### **검색 최적화**

- **디바운스**: 300ms 지연 후 검색
- **캐싱**: 최근 검색 결과 캐시
- **인덱싱**: 백엔드 풀텍스트 검색

### **이미지 최적화**

- **지연 로딩**: 뷰포트 진입 시 로딩
- **썸네일**: 최적화된 작은 이미지
- **WebP 포맷**: 현대 브라우저 지원

## 🔗 네비게이션 패턴

### **진입점**

- 홈 화면 "기록들" 버튼
- 하단 네비게이션 "기록" 탭
- 검색 결과에서 이동

### **상세 이동**

- 카드 터치 → 기록 상세 화면
- 편집 스와이프 → 편집 화면
- 삭제 스와이프 → 삭제 확인

### **신규 생성**

- FAB 버튼 → 모드 선택
- 빈 상태 버튼 → 모드 선택
- 헤더 + 버튼 → 모드 선택

## 🧪 테스트 시나리오

### **기본 기능**

- [ ] 기록 리스트 로딩
- [ ] 무한 스크롤 동작
- [ ] 검색 기능 정상
- [ ] 필터 적용/해제
- [ ] 정렬 변경

### **사용자 경험**

- [ ] 빈 상태 처리
- [ ] 로딩 상태 표시
- [ ] 에러 처리
- [ ] 오프라인 동작

### **성능**

- [ ] 대량 데이터 처리
- [ ] 검색 응답 속도
- [ ] 스크롤 성능
- [ ] 메모리 사용량

## 📋 개발 우선순위

### **Phase 1 (필수)**

- 기본 리스트 표시
- 검색 기능
- 상세 화면 연결
- 무한 스크롤

### **Phase 2 (중요)**

- 고급 필터 UI
- 정렬 옵션
- 스와이프 액션
- 성능 최적화

### **Phase 3 (향상)**

- 가상 스크롤링
- 오프라인 캐싱
- 고급 검색 기능
- 벌크 액션
