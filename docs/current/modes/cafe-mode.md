# Cafe Mode - 카페 방문 기록 모드

## 🎯 모드 개요

**목적**: 카페에서 마신 커피의 전반적인 경험을 상세히 기록
**소요시간**: 5-7분
**대상 사용자**: 카페 투어를 즐기는 사용자, 카페 경험을 기록하고 싶은 사용자
**핵심 가치**: 종합적 경험, 분위기, 감성적 기록

## 📱 플로우 단계 (7단계 구현) ✅

### 구현 완료 (2025-12-01)

**라우팅**: `/record/cafe` (단일 페이지, 7단계 진행)

### Step 1: 카페 정보 (14% 진행률)
- **카페명**: 방문한 카페 이름 (필수)
- **위치**: 카페 위치 정보
- **방문 시간**: 시간대 기록

### Step 2: 커피 정보 (28% 진행률)
- **커피명/메뉴명**: 주문한 커피 (필수)
- **가격**: 커피 가격
- **로스터리**: 원두 로스터리
- **원산지**: 커피 원산지 정보

### Step 3: 감각적 평가 (42% 진행률)
- **향 (Aroma)**: 1-5 별점 평가 (필수)
- **맛 (Flavor)**: 1-5 별점 평가 (필수)
- **바디감 (Body)**: 1-5 별점 평가 (필수)
- **후미 (Aftertaste)**: 1-5 별점 평가 (필수)

### Step 4: 카페 환경 (56% 진행률)
- **분위기**: 조용함/활기참/아늑함 등 (필수)
- **서비스 만족도**: 1-5 별점 평가 (필수)
- **음악**: 재즈/클래식/없음 등
- **붐비는 정도**: 한적함/여유로움/붐빔 등

### Step 5: 개인적 감상 (70% 진행률)
- **개인적 느낌**: 자유로운 텍스트 기록 (필수)
- **기분**: 기분 좋음/편안함/집중 등
- **동행**: 혼자/친구/연인/가족 등

### Step 6: 사진 & 메모 (84% 진행률)
- **사진 업로드**: 커피/카페 사진 (선택사항)
- **추가 메모**: 기타 기록사항 (선택사항)

### Step 7: 완료 (100% 진행률)
- **기록 요약**: 입력한 정보 확인
- **공유 설정**: 커뮤니티 공유 여부
- **저장**: Supabase에 데이터 저장

### 3. 맛 평가 + 감각 표현 (75% 진행률)

**라우팅**: `/record/step3`

- **별점 평가**: 1-5점 필수 입력
- **맛 표현 모드 선택**: Simple/Professional/Basic
- **한국어 감각 표현** (6개 카테고리 탭)
  - 산미: 상큼한, 밝은, 과일향의, 톡 쏘는, 청량한
  - 단맛: 달콤한, 부드러운, 캐러멜향의, 꿀같은, 깔끔한
  - 쓴맛: 진한, 강한, 로스팅향의, 깊은, 묵직한
  - 바디: 가벼운, 중간, 묵직한, 부드러운, 진한
  - 애프터: 깔끔한, 여운이 긴, 개운한, 달콤한, 향긋한
  - 밸런스: 조화로운, 균형잡힌, 완성도 높은, 부족한, 과한
- **특징**: 탭 전환으로 카테고리 이동, 다중 선택 가능

### 4. 개인 노트 + 완료 (100% 진행률)

**라우팅**: `/record/step4`

- **퀵 태그 선택**
  - ☀️ 아침에 마시기 좋아요
  - 🍯 달달해서 좋아요
  - ✨ 산미가 매력적이에요
  - 💪 진하고 묵직해요
  - 😌 부드럽고 편안해요
  - 💕 또 마시고 싶어요
- **자유 텍스트**: 200자 제한으로 간단한 메모
- **로스터 노트**: 카페/로스터 공식 테이스팅 노트 (선택사항)
- **테이스팅 결과 카드** 표시 및 **성취 시스템** 체크
- **액션**: 홈으로 돌아가기, 새로운 기록 시작

## 💾 데이터 구조

```typescript
interface CafeModeData {
  mode: 'cafe'
  coffee_info: {
    cafe_name: string
    coffee_name: string
    temperature: 'hot' | 'iced'
    origin?: string
    variety?: string
    process?: string
    roast_level?: string
    altitude?: number
  }
  flavor_data: {
    selected_flavors: string[] // 최대 5개
  }
  sensory_expression: {
    acidity?: string[]
    sweetness?: string[]
    bitterness?: string[]
    body?: string[]
    aftertaste?: string[]
    balance?: string[]
  }
  personal_comment: {
    quick_tags?: string[]
    free_text?: string // 200자 제한
  }
  roaster_notes?: string
}
```

## 🎨 UI/UX 특징

### 설계 원칙

- **최소 입력**: 필수 정보만 요구, 선택사항 최소화
- **직관적 선택**: 아이콘과 색상으로 빠른 인식
- **건너뛰기 가능**: 모든 선택적 단계에서 스킵 허용
- **즉시 피드백**: 선택 즉시 시각적 확인

### 진행률 표시

- 총 7단계 중 현재 위치 표시 (14% → 29% → 43% → 57% → 71% → 86% → 100%)
- 각 단계별 명확한 퍼센티지 제공
- 뒤로가기로 이전 단계 수정 가능

### 접근성

- 44px 이상 터치 타겟
- 명확한 색상 대비
- 한국어 중심 UI

## 📊 성과 지표

### 목표 메트릭

- **완료율**: 90% 이상 (시작한 사용자의 완료 비율)
- **완료 시간**: 평균 3-5분
- **재사용률**: 주간 2회 이상 사용
- **만족도**: 사용 후 긍정적 피드백 80% 이상

### 주요 이탈 지점

1. 커피 인포 → 맛 평가 (평가 부담감)
2. 감각 표현 (선택지 과다)
3. 퍼스널 노트 (추가 입력 부담)

## 🔧 기술 구현

### 라우팅

```javascript
// Cafe Mode 4단계 플로우 (실제 구현)
const cafeFlow = [
  '/mode-selection',     // 1. 모드 선택
  '/record/step1',       // 2. Coffee Info (기본+고급 정보)
  '/record/step2',       // 3. 추가 정보 (카페 컨텍스트)
  '/record/step3',       // 4. 맛 평가 + 감각 표현
  '/record/step4',       // 5. 개인 노트 + 완료
]
```

### 상태 관리

- **sessionStorage**: 단계별 데이터 임시 저장
- **Supabase**: 최종 데이터 영구 저장
- **진행률 계산**: 4단계 기준 퍼센티지 (25%, 50%, 75%, 100%)

### 성능 최적화

- **즉시 로딩**: PWA 캐싱으로 오프라인 지원
- **부드러운 전환**: 페이지 간 애니메이션
- **배터리 효율**: 최소한의 백그라운드 처리

## 🎯 개선 방향

### 단기 개선

- [ ] 자주 선택하는 향미 우선 표시
- [ ] 개인 맞춤 퀵 태그 추천
- [ ] 입력 중 임시 저장 기능

### 중장기 개선

- [ ] AI 기반 향미 추천
- [ ] 음성 입력 지원
- [ ] 카메라로 커피 정보 자동 인식
- [ ] 소셜 공유 기능 강화
